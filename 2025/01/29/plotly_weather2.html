<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="stylesheet" href="/assets/main.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Data Visualization, Data Science and AI" /></head>
<body class="container" style="background-color:ghostwhite;"><header><!--</header> class="site-header" role="banner" style="background-color: white">-->
  <div class="wrapper mb-2"><a class="site-title" style="font-size: larger;" rel="author" href="https://datavizandai.github.io">Data Visualization, Data Science and AI</a>
    <a class="site-nav" rel="author" href="/about">About</a>
  </div>
</header><main class="container" aria-label="Content">
      <div >
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Rapid Data Visualization with Copilot and Plotly</h1>
    <h3>Code visualizations quickly and efficiently with Copilot, Plotly and Streamlit</h3>
    <p class="post-meta">
      <time class="dt-published" datetime="2025-01-29T00:00:00+01:00" itemprop="datePublished">Jan 29, 2025
      </time></p>
  </header>

  <!-- Google Analytics-->
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VDYY6RYRK1"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());

      gtag('config', 'G-VDYY6RYRK1');
  </script>

  <div class="row">
    <div class="col-sm-9">
      <div class="post-content e-content" itemprop="articleBody">
        <p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/Untitled.png?raw=true" alt="" /></p>

<p>GitHub has recently introduced a free tier for Copilot, so there now is absolutely no reason not to try it out. I decided to give it a go on some day-to-day coding to see how much more productive it is than coding by hand.</p>

<p>To be honest, I rather like coding by hand so I haven’t used AI to generate code to any great extent. I think this is going to change.</p>

<p>Initially, I only used Copilot for simple coding tasks and I was pleasantly surprised how quick and easy it was - considerably quicker than coding by hand. Next, I created a Streamlit app that involved a bit of data analysis, and then I let Copilot make it more interactive by adding user interface controls. <em>All this without me writing a single line of code!</em></p>

<p>I used Microsoft VSCode and added the <em>GitHub Copilot</em> extension, so, if you want to follow along you need to install the extension and read the instructions on how to get started with it. Copilot supports other editors as well but VSCode is currently my editor of choice.</p>

<p>I’ll get to the visualization and Streamlit code shortly, but first, we need to look at the ways we can use Copilot.</p>

<h3 id="copilot-modes">Copilot modes</h3>

<p>There are three main modes of use: <strong>code completion</strong>, <strong>chat</strong> and <strong>inline chat</strong>.</p>

<p>Chat opens a new window that you can use in much the same way as ChatGPT. Inline chat lets you write shorter prompts that can add to or replace existing code. Code completion does exactly what it says but as well as completing code that you write, it can be started from a plain English comment, and will begin adding code for you.</p>

<p>I used all three modes to create the data visualization and Streamlit code but, first, let’s look at some simple illustrations.</p>

<h3 id="code-completion">Code completion</h3>

<p>As you might expect, to use code completion you start typing and Copilot suggests what it thinks you want to do. Below you can see an example where I began to write a function definition. I got as far as <code class="language-plaintext highlighter-rouge">def bub</code> and Copilot suggested that I wanted to write a bubble sort function and suggested the code that you can see that is italic and greyed out.</p>

<p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/bubble-sort.png?raw=true" alt="" /></p>

<p>To accept the code you just hit &lt;tab&gt;.</p>

<p>But you don’t have to write any code. If you write a comment that describes the code that you want, Copilot will suggest the code. Just hit &lt;tab&gt; to accept the first line of code and then &lt;return&gt; whereupon, if it thinks it is necessary, Copilot will suggest another line, so keep hitting &lt;tab&gt; and &lt;return&gt; until it runs out of ideas.</p>

<p>In the screenshot below I wrote the comment and hit &lt;return&gt;.</p>

<p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/copilotpreviewtext.png?raw=true" alt="" /></p>

<p>That is really quite a useful thing to be able to do. It’s a good idea to document your code with comments, so if you do that anyway, then it’s great that Copilot can write the code that should follow.</p>

<h3 id="inline-chat">Inline chat</h3>

<p>Inline chat is a sort of mini-chat interface and is good for modifying code.</p>

<p>Below is some simple plotting code (most of which is the result of code completion). I’ve selected the plotting code and hit &lt;ctrl-i&gt; which invokes the inline chat function. In the dialog box, I’ve asked Copilot to “<em>use the ploty_white template, size the figure 800x600 and make the line red</em>”.</p>

<p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/inline-chat-plotting.png?raw=true" alt="" /></p>

<p>The response to executing this request is as follows:</p>

<p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/inline-chat-plotting-result.png?raw=true" alt="" /></p>

<p>Copilot has suggested the three lines of code that are highlighted. I now have the choice to <em>Accept</em>, <em>Discard</em>, or retry. The code looks functional, so I accept it and, of course, it works fine.</p>

<p>You can modify your code in other ways, too. Select a chunk of code and simply tell Copilot to “<em>refactor</em>” and it will, among other things, substitute functions for inline code, where appropriate. You could ask it to comment the code, too.</p>

<p>You can use inline chat to create new code, as well. But if you need a lot of code creation, you might prefer the full chat interface.</p>

<h3 id="chat-interface">Chat interface</h3>

<p>This is fairly similar to a ChatGPT interface but it is incorporated into the editor environment so you can ask Copilot to create code and have it automatically inserted into a file.</p>

<p>You bring up the chat interface from the view menu, enter a request and Copilot will respond with an answer. Below, I have asked it to “<em>Create a program to illustrate the use of matplotlib to create a scatter chart with a linear regression line.</em>”.</p>

<p>It responds with the correct code in the same window.</p>

<p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/copilot-chat-matplotlib.png?raw=true" alt="" /></p>

<p>If I am satisfied with the code I can transfer it to the editor with a single click - see the screenshot below.</p>

<p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/copilot-chat-matplotlib-result.png?raw=true" alt="" /></p>

<p>Here is the result in the editor window. The button indicated is the one I clicked and is labelled “<em>Apply in editor</em>”. The code is now in the editor and I am being prompted to accept it (or not) as with inline chat.</p>

<p>The chat interface is best for creating large blocks of code and, as well as creating a complete program, you can create a chunk of code that can be inserted at the cursor position in the editor.</p>

<h3 id="copilot-knows-plotly">Copilot knows Plotly</h3>

<p>Copilot relies on ChatGPT and that cannot keep up with all the new Python libraries published on PyPi. However, Plotly has been around and stable for a long time, so Copilot can create Plotly code easily.</p>

<p>I’m going to create some graphs with Plotly by writing a comment from which Copilot will create code.
But we’ll start with something necessary though trivial in terms of coding. I’ll limit myself to a couple of examples but there are more in a Jupyter Notebook in the repo.</p>

<p>We need the following libraries.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># import plotly express, plotly graphic objects and pandas
</span><span class="kn">import</span> <span class="n">plotly.express</span> <span class="k">as</span> <span class="n">px</span>
<span class="kn">import</span> <span class="n">plotly.graph_objects</span> <span class="k">as</span> <span class="n">go</span>
<span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
</code></pre></div></div>

<p>And we need some data to plot.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># read the columns 'Year', 'Month', 'Tmax', 'Tmean', 'Tmin', 'Rain'
#  and 'Sun' from 'Heathrow.csv' into the dataframe df0
</span><span class="n">df0</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">Heathrow.csv</span><span class="sh">'</span><span class="p">,</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Month</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Tmax</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Tmean</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Tmin</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Rain</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Sun</span><span class="sh">'</span><span class="p">])</span>

<span class="c1"># New dataframe df2023
</span><span class="n">df2023</span> <span class="o">=</span> <span class="n">df0</span><span class="p">[</span><span class="n">df0</span><span class="p">[</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2023</span><span class="p">]</span>
</code></pre></div></div>

<p>By looking at the comment, you might think that I let Copilot write this code - and you’d be right. Now, of course, it would be fair comment to point out that it would have been as easy to write the code as it was to write the comment. And that is true, but it’s not in the spirit of this exercise and, also, if you are unfamiliar with the syntax, or are not a very good typist, it’s a time saver.</p>

<p>The data is a record of weather data for Heathrow, London’s main airport and nearest major weather station. The data comes from my own <a href="https://github.com/alanjones2/uk-historical-weather">GitHub repo</a> and is derived from the UK Met Office’s raw data. Both sources are freely usable (see the license information in the repo).</p>

<p>The second dataframe is a subset of that data from 2023. It looks like this:</p>

<p><img src="https://github.com/alanjones2/dataviz-copilot/blob/master/images/weather-2023-table.png?raw=true" alt="" /></p>

<p>I wanted to set some defaults for the plots I was going to create and, to be honest, I couldn’t remember exactly how to do it, so I used code completion from the comment.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># set plotly defaults: template - plotly_white, height - 600, width - 800
</span><span class="n">px</span><span class="p">.</span><span class="n">defaults</span><span class="p">.</span><span class="n">template</span> <span class="o">=</span> <span class="sh">'</span><span class="s">plotly_white</span><span class="sh">'</span>
<span class="n">px</span><span class="p">.</span><span class="n">defaults</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">px</span><span class="p">.</span><span class="n">defaults</span><span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">800</span>
</code></pre></div></div>

<p>I don’t why I forgot that, it’s pretty simple, but I remember now!</p>

<p>So, let’s draw some charts - or rather let’s let Copilot draw some charts for us.</p>

<p>In each case, I wrote the comment; Copilot suggested the code and I accepted it. In some cases the comment was fairly precise, others were less so.</p>

<p>Here’s a scatter chart with a trendline.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Plot a scatter diagram of Rain and Sun for the year 2023 with a trendline
</span><span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="p">.</span><span class="nf">scatter</span><span class="p">(</span><span class="n">df2023</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="sh">'</span><span class="s">Rain</span><span class="sh">'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">'</span><span class="s">Sun</span><span class="sh">'</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Rain vs Sun for 2023</span><span class="sh">'</span><span class="p">,</span> <span class="n">trendline</span><span class="o">=</span><span class="sh">'</span><span class="s">ols</span><span class="sh">'</span><span class="p">)</span>
<span class="n">fig</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="https://github.com/alanjones2/dataviz-copilot/blob/master/images/scatter-rain-sun.png?raw=true" alt="" />
 </p>

<p>Yep, that’s what I wanted.</p>

<p>In the repo Notebook you’ll find examples of a line chart and a bar chart but I don’t want this to get too boring so here is something a little bit more ambitious.</p>

<p>I want to draw a line chart over the top of a bar chart. The line will plot the mean temperature for each month and the bars will represent the rainfall.</p>

<p>The values for the two charts are quite different and one is in degrees C and the other in millimetres. This means we need two y-axes.  I wasn’t entirely certain how to do this; I know that Plotly Express doesn’t support this combining of charts and so I would have to use the Graphic Object library, instead.</p>

<p>I’m not that familiar with Plotly GO, I knew that I would have to use two plots and then use <code class="language-plaintext highlighter-rouge">add_traces</code> to combine them into a single figure but I wasn’t sure of the syntax. Also because I had little idea about how to draw the two y-axes so I was quite explicit with the prompt.</p>

<p>Copilot performed two tasks here, first, it wrote the code and second, it taught me how to do it.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># using plotly graphic object create a plot with two y-axes, one on the left of the 
# figure and the other on the right add a traces for a bar plot of Rainfall and line 
# plot of Tmax in the year 2023
</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="p">.</span><span class="nc">Figure</span><span class="p">()</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">add_trace</span><span class="p">(</span><span class="n">go</span><span class="p">.</span><span class="nc">Bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df2023</span><span class="p">[</span><span class="sh">'</span><span class="s">Month</span><span class="sh">'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df2023</span><span class="p">[</span><span class="sh">'</span><span class="s">Rain</span><span class="sh">'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">Rain</span><span class="sh">'</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="sh">'</span><span class="s">y1</span><span class="sh">'</span><span class="p">))</span>
<span class="n">fig</span><span class="p">.</span><span class="nf">add_trace</span><span class="p">(</span><span class="n">go</span><span class="p">.</span><span class="nc">Scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df2023</span><span class="p">[</span><span class="sh">'</span><span class="s">Month</span><span class="sh">'</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df2023</span><span class="p">[</span><span class="sh">'</span><span class="s">Tmax</span><span class="sh">'</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="sh">'</span><span class="s">Tmax</span><span class="sh">'</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="sh">'</span><span class="s">y2</span><span class="sh">'</span><span class="p">))</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">update_layout</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Rainfall and Tmax for 2023</span><span class="sh">'</span><span class="p">,</span> <span class="n">yaxis</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Rain</span><span class="sh">'</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="sh">'</span><span class="s">left</span><span class="sh">'</span><span class="p">),</span> 
                  <span class="n">yaxis2</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Tmax</span><span class="sh">'</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="sh">'</span><span class="s">right</span><span class="sh">'</span><span class="p">,</span> <span class="n">overlaying</span><span class="o">=</span><span class="sh">'</span><span class="s">y</span><span class="sh">'</span><span class="p">,</span> <span class="n">showgrid</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span> 
                  <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div>

<p><img src="https://github.com/alanjones2/dataviz-copilot/blob/master/images/tmax-rainfall2.png?raw=true" alt="" /></p>

<p>Copilot has done more than I asked. It seems to have assumed that I would want to keep the same figure size and knows that the defaults I set earlier would have no effect on Plotly GO figures, so it has set the same height and width, explicitly, as well as adding a suitable title.</p>

<p>While simple plots are quite trivial, this one would have taken me much longer to code if I were not using Copilot.</p>

<h3 id="a-streamlit-app">A Streamlit app</h3>

<p>So far, so good. The completion function works nicely for writing new code, let’s see if we can be slightly more ambitious and write a Streamlit app and use the other Copilot modes.</p>

<p>The first thing to say is that, for this experiment, Copilot still produces pretty good code but on occasion, it needs adjusting. And that is where we will use the in-line chat facility.</p>

<p>The app that we will develop uses the same data as before but does some analysis and attempts to show if we can detect the effect of Global Warming on summer temperatures in London. The app looks like the screenshot below and was written pretty much entirely by Copilot - even the textual descriptions and headers.</p>

<p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/st-app-screenshot.png?raw=true" alt="" /></p>

<p>The data is the same as we saw above but, not just for 2023 - it starts in 1949.</p>

<p>I’ll go through the code bit by bit and you can see the complete app in the <a href="https://github.com/DataVizandAI/public_code/tree/main/dataviz-copilot">Github repo for this article</a>.</p>

<p>We start off with the preamble code and by reading the data. Again, I wrote the comments and Copilot wrote the code - except where noted in the comments.</p>

<pre><code class="language-Python"># import libraries streamlit, pandas and plotly express
import streamlit as st
import pandas as pd
import plotly.express as px

# Set display to wide
st.set_page_config(layout='wide')

# A function to read a csv file and return a dataframe
# The function takes a file path as an argument and the result is cached
# Only the columns 'Year', 'Month' and 'Tmean' are required
@st.cache_data
def read_csv(file_path):
    return pd.read_csv(file_path, usecols=['Year', 'Month', 'Tmean'])

# Copilot wanted to use the decorator @cache - this is deprecated, it should use @cache_data
# A manual edit was required

# Read 'Heathrow.csv' as a dataframe
df = read_csv('Heathrow.csv')

</code></pre>

<p>Copilot is not completely up-to-date as can be seen by the use of the <code class="language-plaintext highlighter-rouge">@cache</code> decorator. Streamlit deprecated this some time ago and <code class="language-plaintext highlighter-rouge">@cache_data</code> should now be used. This is not a big deal as Streamlit reminds us that we should do this when we run the app but it is as well to bear in mind that Copilot might be a little old-fashioned. Apart from this, the code was properly constructed.</p>

<p>The comments are quite verbose and, again, you might think that you could have written the code as easily as writing the comments. My response to this criticism would be that I feel that I ought to write the comments anyway and this is for two reasons: first, well-commented code is more easily understood, and second, writing the comments clarifies my intentions - I am thinking about the problem that I am trying to solve rather than the Python code.</p>

<p>Next, we do a bit of analysis. My intention is to track summer temperatures across time but the data doesn’t have that information - we need to create it from the monthly figures.</p>

<p>Notice that the only observation that I have included in the dataframe is the mean temperature for each month. So, the first thing is to re-jig the dataframe so that we have columns for each month and rows that represent years. The cell contents will be <code class="language-plaintext highlighter-rouge">Tmean</code>.</p>

<p>That doesn’t give me the summer temperatures. I need to add the means for June, July and August and put the result in a new column. But if you look at the screenshot above you’ll see that the temperatures are shown as positive and negative changes from the average summer temperature. This gives us a better representation of the changes than the actual temperatures. So, I want another column with these values - the change from the average.</p>

<p>The resulting dataframe should look like the image below.</p>

<p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/summer-table.png?raw=true" alt="" /></p>

<p>The description that I just gave boils down to just three lines of code.</p>

<p>The Pandas method <code class="language-plaintext highlighter-rouge">pivot</code> is used to re-shape the dataframe; the column <code class="language-plaintext highlighter-rouge">Summer</code> is the mean of columns 6,7, and 8; and the change column is the difference between the value for <code class="language-plaintext highlighter-rouge">Summer</code> and the mean of the entire <code class="language-plaintext highlighter-rouge">Summer</code> column.</p>

<pre><code class="language-Python"># Create a new dataframe from df where the columns are months and the year are the rows
df = df.pivot(index='Year', columns='Month', values='Tmean')

# add a column to df that it the average temperature of month columns labelled 6, 7, and 8. 
# Label it 'Summer'.
df['Summer'] = df[[6, 7, 8]].mean(axis=1)
# add a column to df that is the dfference between the average summer temperature over all 
# years and the actual summer temparature. Label it 'dSummer'.
df['dSummer'] = df['Summer'] - df['Summer'].mean()
</code></pre>

<p>The code is not difficult but I would have written these comments to make sure that anyone reading the code would know what my intentions were. Copilot did that and produced code that was both correct and neat.</p>

<p>Below is the initial code for the bar chart that was generated with code completion from the comment.</p>

<pre><code class="language-Python"># plot a bar chart of the dSummer temperature over all years
summer_fig = px.bar(df, x=df.index, y='dSummer', title='Summer Temperature Anomaly')
summer_fig.update_layout(yaxis_title='Temperature Anomaly (°C)')
</code></pre>

<p>I wanted to change the colour of the bars: positive values should be red and negative ones blue. And this is where inline chat comes in. I selected the two lines of code hit &lt;ctrl-i&gt; and in the dialog box asked it to update the layout and change the colours of the bars. It added this line:</p>

<pre><code class="language-Python">summer_fig.update_traces(marker_color=df['dSummer'].apply(lambda x: 'red' if x &gt; 0 else 'blue'))
</code></pre>

<p>This did the job.</p>

<p>Similarly, the original code that was produced for the scatter chart made the scatter dots and the trendline the same colour. For clarity, I wanted the trendline to be a different colour. So, again, I highlighted the chart code and in an inline chat window asked it to change the colour of the line. Here is the resulting code.</p>

<pre><code class="language-Python"># plot a scatter chart with trendline of the dSummer temperature over all years.
scatter_fig = px.scatter(df, x=df.index, y='dSummer', trendline='ols', title='Summer Temperature Anomaly')
scatter_fig.update_layout(xaxis_title='Summer Temperature (°C)', yaxis_title='Temperature Anomaly (°C)')
scatter_fig.update_traces(marker_color='red')
scatter_fig.data[1].line.color = 'blue'  # Change the trendline color to blue
</code></pre>

<p>The rest of the code is fairly trivial Streamlit layout and all produced by Copilot. See the repo for the complete code - the program is well-commented and shows how it was produced.</p>

<p>And, as a matter of interest, it shows that there is a detectable rise in summer temperatures for the period 1949 to 2024.</p>

<h3 id="add-functionality-with-copilot">Add functionality with Copilot</h3>

<p>The app works perfectly well but is rather static. What if we were to add a slider to select the beginning and end years to be plotted?</p>

<p>I used the inline chat interface to make that exact request and Copilot responded perfectly. Again you can see the full code in the repo. Below you can see a close-up screenshot of the slider in action.</p>

<p><img src="https://github.com/DataVizandAI/public_code/blob/main/dataviz-copilot/images/app-with-slider-detail.png?raw=truee" alt="" /></p>

<h3 id="conclusion">Conclusion</h3>

<p>In this exercise, I have used Copilot to produce code that I could have written myself. But, on occasions, I forget the exact syntax or form of what it is I want to do but, helpfully, Copilot does not. I also make the occasional typo, Copilot doesn’t, and it types much faster than I can. All of this makes writing the code quicker and easier - considerably so.</p>

<p>I’m not sure that I would be entirely happy relying on it to produce code that I didn’t understand myself. But sometimes, it comes up with something that I hadn’t thought of and that is helpful as it increases my knowledge as well as producing a result.</p>

<p>Frankly, Copilot is a boon and I’ll carry on using it, or something like it. And if I run out of the free quota, I would definitely consider forking out the (fairly modest) monthly subscription.</p>

<hr />

<p>Thanks for reading and, if you haven’t tried Copilot yet, I hope this encourages you to give it a try. To read more of my articles and tutorials please see my <a href="DataVizandAI.github.io">website</a> and consider subscribing to my occasional newsletter where I link to new articles. You can also follow me on <a href="https://medium.com/@alan-jones">Medium</a>.</p>

<p><strong>Notes</strong></p>

<ol>
  <li>The complete source code can be found in the <a href="https://github.com/DataVizandAI/public_code/tree/main/dataviz-copilot">Github repo for this article</a>.</li>
  <li>Here is the weather data <a href="https://github.com/alanjones2/uk-historical-weather">GitHub repo</a>.</li>
  <li>All Images and screenshots are by the author unless otherwise noted.</li>
</ol>

      </div>

    </div>
    <div class="col-sm-3">
      Sponsored content<!--ads etc here -->
<!-- streamlit from scratch-->
<div class="p-4 shadow-sm mb-4 rounded border border-secondary bg-light">
    <!--style="background-image: url('https://github.com/alanjones2/streamlitfromscratch/blob/main/sfsimage.png?raw=true');background-size: cover;"-->
    
    <div>
        <!--<img class="mr-3" src="" width='80%' height='auto' alt="">-->
        <h2>
            <a href="https://alanjones2.github.io/streamlitfromscratch/" target="_blank">
                <span style="color:navy">Streamlit from Scratch</span>
            </a>
        </h2>
        <p class="lead" style="color: navy;"><b>Streamlit</b> is a framework for creating Data Science apps in Python.
            <br />
            <b>Streamlit from Scratch</b> will take from building a simple we page through to creating fully functional
            interactive data dashboards.
        </p>

    </div>
</div>
<!--
<div class="p-4 shadow-sm mb-4 rounded border border-secondary bg-light">

    <i>eBook</i>
    <h2><a href='https://alanjones.gumroad.com/l/auiws' target='_blank'><span style="color:navy">Plotting with
                Pandas</span></a>
    </h2>
    <p class="lead" style="color: navy;">
        <b>Plotting with Pandas: an Introduction to Data Visualization</b> is an ebook that covers basic and
        statistical plots using Python and Pandas, line and bar charts, scatter plots, pie charts,
        histograms, box plots, etc.
    </p>
</div>
-->

<div class="p-4 shadow-sm mb-4 rounded border border-secondary bg-light">
    <h3>Recommended books</h3>
    <hr/>
    <h4><span style="color:navy">Alberto Cairo</span></h4>
    Alberto Cairo is the Knight Chair in Visual Journalism at the University of Miami (UM), 
    and has written excellent books about Data Visualization. Here are two of my favourites:
    <div>
    <a href="https://amzn.to/3Qd3sH7" target="_blank">
        How Charts Lie: Getting Smarter about Visual Information</a>
    </div>
    <div>
    <a href="https://amzn.to/40PQYdv" target="_blank">
        The Art of Insight: How Great Visualization Designers Think</a>
        <br/>
    </div>
    <div>
    <hr/>
    <h4><span style="color:navy">Cole Nussbaumer Knaflic</span></h4>
    Cole Nussbaumer Knaflic tells stories with data. She is founder and CEO of storytelling with 
    data (SWD).  SWD's well-regarded workshops 
    and presentations are highly sought after by data-minded individuals, companies, 
    and philanthropic organizations all over the world. 
    Here is her most famous book:
    </div>
    <div>
    <a href="https://amzn.to/3QcnUb6" target="_blank">
        Storytelling with Data: A Data Visualization Guide for Business Professionals</a>
    </div>
</div>

<div class="p-4 shadow-sm mb-4 rounded border border-secondary bg-light">
<!-- google add start-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3208991186670959"
    crossorigin="anonymous"></script>
<!-- sfs vertical -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3208991186670959" data-ad-slot="6617299104"
    data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<!-- google add end-->

<!-- google add start-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3208991186670959"
    crossorigin="anonymous"></script>
<!-- sfs vertical -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3208991186670959" data-ad-slot="6617299104"
    data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<!-- google add end-->

<!-- google add start-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3208991186670959"
    crossorigin="anonymous"></script>
<!-- sfs vertical -->
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3208991186670959" data-ad-slot="6617299104"
    data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<!-- google add end-->
</div></div>
<div>
    <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
    <script>
        kofiWidgetOverlay.draw('alan_jones', {
            'type': 'floating-chat',
            'floating-chat.donateButton.text': 'Buy a coffee',
            'floating-chat.donateButton.background-color': '#5bc0de',
            'floating-chat.donateButton.text-color': '#323842'
        });
    </script>
</div></div><a class="u-url" href="/2025/01/29/plotly_weather2.html" hidden></a>
</article>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

  </body>

</html>
